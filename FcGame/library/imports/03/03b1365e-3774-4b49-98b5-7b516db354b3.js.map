{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\Follow.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import AudioManager from \"./AudioManager\";\r\nimport EnemySpawn from \"./enemy/EnemySpawn\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Follow extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    target: cc.Node = null;\r\n\r\n    @property(cc.Animation)\r\n    bgUpAni: cc.Animation = null;\r\n\r\n    @property(EnemySpawn)\r\n    enemySpawn: EnemySpawn = null;\r\n\r\n    @property speed: number = 1\r\n\r\n    isPlayerAni: boolean = false\r\n    isboss: boolean = false\r\n\r\n    // 记录游戏时间，用来做触发\r\n    gameTime: number = 0\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        let act = cc.follow(this.target, new cc.Rect(0, 0, 1130 * 20, 640 * 5))\r\n        this.node.runAction(act)\r\n        this.enemySpawn.enabled = false\r\n        this.gameTime = 0\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update(dt) {\r\n        this.gameTime += dt;\r\n        if (this.target.x < 12877) {\r\n            this.target.x += this.speed * dt;\r\n            if (this.target.x > 7500 && this.target.x <= 11000 && !this.isPlayerAni) {\r\n                let state: cc.AnimationState = this.bgUpAni.play()\r\n                state.repeatCount = 2\r\n                this.isPlayerAni = true\r\n            } else if (this.target.x > 11000 && this.isPlayerAni) {\r\n                // this.bgUpAni.stop()\r\n                // this.isPlayerAni = false\r\n                // this.bgUpAni.node.setPositionY(350)\r\n            }\r\n\r\n            // cc.log('one', this.gameTime)\r\n            if (this.gameTime > 2 && this.gameTime < 3) {\r\n                this.enemySpawn.enabled = true\r\n            }\r\n        } else {\r\n            if (!this.isboss) {\r\n                this.isboss = true\r\n                AudioManager.instance.playBossMusic()\r\n            }\r\n        }\r\n\r\n        if (this.target.x > 2500 && this.target.x < 12000) {\r\n            if (this.target.y <= 1520) {\r\n                this.target.y += this.speed * dt;\r\n            }\r\n        } else if (this.target.x > 12000 && this.target.x < 12877) {\r\n            if (this.target.y >= 923) {\r\n                this.target.x -= this.speed * dt;\r\n                this.target.y -= this.speed * dt;\r\n            }\r\n        }\r\n    }\r\n}"]}